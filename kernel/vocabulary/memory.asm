; ***************************************************************************************
; ***************************************************************************************
;
;		Name : 		memory.asm
;		Author :	Paul Robson (paul@robsons.org.uk)
;		Date : 		23rd December 2018
;		Purpose :	Memory and Port I/O
;
; ***************************************************************************************
; ***************************************************************************************

; ***************************************************************************************
; 								! 16 bit write of S2 to S1
; ***************************************************************************************

; @macro 		!
		pop 	hl 									; data in HL, address in DE
		ex 		de,hl 								; address in HL, data in DE
		ld 		(hl),e 								; write it out
		inc 	hl
		ld 		(hl),d
		pop 	de 									; fix up TOS.

; ***************************************************************************************
; 								+! add S2 to memory at S1
; ***************************************************************************************

; @forth.hl 	+!
		pop 	bc  								; data in BC, address in DE
		ld 		a,(de) 								; add to memory
		add 	a,b
		ld 		(de),a
		inc 	de
		ld 		a,(de)
		adc 	a,c
		ld 		(de),a
		pop 	de 									; fix up TOS.
; @end	

; ***************************************************************************************
; 								 @ 16 bit read of S2 to S1
; ***************************************************************************************

; @macro 		@
		ex 		de,hl
		ld 		e,(hl)
		inc 	hl
		ld 		d,(hl)
; @end

; ***************************************************************************************
; 								 b@ 8 bit read of S2 to S1
; ***************************************************************************************

; @macro 		b@
		ld 		a,(de)
		ld 		e,a
		ld 		d,0
; @end

; ***************************************************************************************
; 								b! 8 bit write of S2 to S1
; ***************************************************************************************

; @macro 		!
		pop 	hl 									; data in HL, address in DE
		ld 		a,l
		ld 		(de),a
		pop 	de 									; fix up TOS.
; @end

